{% extends "global/base.html" %}
{% block title %} Dashboard | {% endblock title %}

{% block content %}
    <div class="main-content center container">
        <h2>Dashboard ({{ user }})</h2>
        {% include "global/partials/messages.html" %}
        {% include 'authors/partials/login_message.html' %}

        <div class="left">
            {% include 'global/partials/form.html' %}
        </div>

        <div id='map' style="height:500px; width: 100%;"></div>

    </div>    
   



{% endblock content %}

{% block scripts %}
    <script>
        var map = L.map('map').setView([-22.580014, -42.964325], 13);
        L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
        }).addTo(map);

        var marker;

        map.on('click', function(event)  {
            var lat = event.latlng.lat;
            var lng = event.latlng.lng;

            if (marker) {
                map.removeLayer(marker);
            }

            marker = L.marker([event.latlng.lat, event.latlng.lng]).addTo(map)

            document.getElementById('lat').value = lat;
            document.getElementById('lng').value = lng;
            console.log("Latitude: " + lat + ', Longitude: ' + lng);
        })
    </script>

{% endblock scripts %}

